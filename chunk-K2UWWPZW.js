import{a as u}from"./chunk-J53X2QPK.js";import{d as l}from"./chunk-CKXI5352.js";import{c as n}from"./chunk-5GI745L5.js";import{Z as c,ca as s,g as a,ha as i}from"./chunk-KIEVHPHK.js";var o=(()=>{class r{constructor(t){this.http=t,this.baseUrl=u.apiUrl}static{this.ACCOUNT={LOGIN:"/Account/login"}}static{this.ASSOCIATE={CREATE:"/Associate/Create",GET_ALL:"/Associate/GetAll",GET_BY_ID:t=>`/Associate/Get/${t}`,UPDATE:t=>`/Associate/Update/${t}`,DELETE:t=>`/Associate/Delete/${t}`}}static{this.USERS={GET_ALL:"/Users",GET_BY_ID:t=>`/Users/${t}`}}get(t){return this.http.get(`${this.baseUrl}${t}`)}post(t,e,m=!1){return this.http.post(`${this.baseUrl}${t}`,e)}put(t,e){return this.http.put(`${this.baseUrl}${t}`,e)}delete(t){return this.http.delete(`${this.baseUrl}${t}`)}static{this.\u0275fac=function(e){return new(e||r)(i(n))}}static{this.\u0275prov=s({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var U=(()=>{class r{constructor(t,e){this.apiService=t,this.router=e,this.isAuthenticatedSubject=new a(this.hasToken()),this.isAuthenticated$=this.isAuthenticatedSubject.asObservable()}hasToken(){return!!localStorage.getItem("accessToken")||!!(localStorage.getItem("currentUser")&&JSON.parse(localStorage.getItem("currentUser")||"{}").accessToken)}login(t){return this.apiService.post(o.ACCOUNT.LOGIN,t).pipe(c(e=>{e&&e.accessToken&&(localStorage.setItem("currentUser",JSON.stringify(e)),localStorage.setItem("accessToken",e.accessToken),this.isAuthenticatedSubject.next(!0))}))}logout(){localStorage.removeItem("currentUser"),localStorage.removeItem("accessToken"),this.isAuthenticatedSubject.next(!1),this.router.navigate(["/login"])}getCurrentUser(){let t=localStorage.getItem("currentUser");return t?JSON.parse(t):null}getToken(){return localStorage.getItem("accessToken")||this.getCurrentUser()?.accessToken||null}static{this.\u0275fac=function(e){return new(e||r)(i(o),i(l))}}static{this.\u0275prov=s({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();export{U as a};
