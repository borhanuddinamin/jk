import{y as k}from"./chunk-2NLPW5PB.js";import"./chunk-NDRFT3GA.js";import"./chunk-7RWCIHFI.js";import"./chunk-SYPECXLL.js";import"./chunk-DVH4F5PI.js";import"./chunk-X6IE7A3T.js";import{g as v,i as R,y as A,z as q}from"./chunk-N7SLXCJE.js";import{d as I,m as D,r as S}from"./chunk-L6LZRLIM.js";import{Bb as M,Ja as p,Lb as O,Rc as w,Vb as _,Wb as y,Xb as x,ba as u,ha as i,hb as f,ob as b,qc as m,ub as P,za as C}from"./chunk-RFWNQ5TK.js";import{a as r}from"./chunk-4CLCTAJ7.js";var s=function(e,l){if(!(typeof window>"u")&&!(typeof document>"u")){var t=l??document.body;return window.getComputedStyle(t,null).getPropertyValue(e).replace(/^\s/,"")}};var B=(()=>{class e{constructor(){this.mainChart={type:"line"},this.initMainChart()}random(t,n){return Math.floor(Math.random()*(n-t+1)+t)}initMainChart(t="Month"){let n=s("--cui-success")??"#4dbd74",o=s("--cui-info")??"#20a8d8",c=`rgba(${s("--cui-info-rgb")}, .1)`,h=s("--cui-danger")??"#f86c6b";this.mainChart.elements=t==="Month"?12:27,this.mainChart.Data1=[],this.mainChart.Data2=[],this.mainChart.Data3=[];for(let a=0;a<=this.mainChart.elements;a++)this.mainChart.Data1.push(this.random(50,240)),this.mainChart.Data2.push(this.random(20,160)),this.mainChart.Data3.push(65);let d=[];if(t==="Month")d=["January","February","March","April","May","June","July","August","September","October","November","December"];else{let a=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];d=a.concat(a,a,a)}let g=[{backgroundColor:c,borderColor:o,pointHoverBackgroundColor:o,borderWidth:2,fill:!0},{backgroundColor:"transparent",borderColor:n||"#4dbd74",pointHoverBackgroundColor:"#fff"},{backgroundColor:"transparent",borderColor:h||"#f86c6b",pointHoverBackgroundColor:h,borderWidth:1,borderDash:[8,5]}],T=[r({data:this.mainChart.Data1,label:"Current"},g[0]),r({data:this.mainChart.Data2,label:"Previous"},g[1]),r({data:this.mainChart.Data3,label:"BEP"},g[2])],L={legend:{display:!1},tooltip:{callbacks:{labelColor:a=>({backgroundColor:a.dataset.borderColor})}}},F=this.getScales(),Q={maintainAspectRatio:!1,plugins:L,scales:F,elements:{line:{tension:.4},point:{radius:0,hitRadius:10,hoverRadius:4,hoverBorderWidth:3}}};this.mainChart.type="line",this.mainChart.options=Q,this.mainChart.data={datasets:T,labels:d}}getScales(){let t=s("--cui-border-color-translucent"),n=s("--cui-body-color");return{x:{grid:{color:t,drawOnChartArea:!1},ticks:{color:n}},y:{border:{color:t},grid:{color:t},max:250,beginAtZero:!0,ticks:{color:n,maxTicksLimit:5,stepSize:Math.ceil(250/5)}}}}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=u({token:e,factory:e.\u0275fac,providedIn:"any"})}}return e})();function J(e,l){e&1&&(_(0,"div")(1,"h1",1),m(2,"Admin Dashboard"),y()())}var xt=(()=>{class e{constructor(){this.#t=i(B),this.#n=i(I),this.#e=i(b),this.#o=i(C),this.currentMonthPaidInstallments=28,this.currentMonthDueInstallments=14,this.installmentCompletionRate=66.7,this.totalInstallmentAmount=245e3,this.paidInstallmentAmount=168e3,this.dueInstallmentAmount=77e3,this.totalMonthlySales=745e3,this.totalYearlySales=845e4,this.netProfit=325e3,this.totalCommission=95e3,this.totalCustomers=248,this.totalMonthlyInstallments=42,this.totalSupplierSales=45e4,this.totalCommissionProducts=35,this.searchQuery="",this.filteredProducts=[],this.userRole="admin",this.products=[],this.installmentPersons=[{id:"1",name:"John Doe",product:"Laptop Pro X1",totalAmount:85e3,paidAmount:45e3,remainingAmount:4e4,nextDueDate:"2023-08-15",status:"Regular",isDefaulter:!1,paidInstallments:4,totalInstallments:12,dueInstallments:8,lastPaymentDate:"2023-07-15",daysSinceLastPayment:15}],this.currentPage=1,this.itemsPerPage=5,this.totalItems=0,this.mainChart={type:"line"},this.salesChart={type:"bar"},this.commissionChart={type:"bar"},this.mainChartRef=p(void 0),this.#a=w(()=>{this.mainChartRef()&&this.setChartStyles()}),this.chart=[],this.trafficRadioGroup=new v({trafficRadio:new R("Month")}),this.productQuantityByCategory=[{category:"Electronics",quantity:137},{category:"Furniture",quantity:45},{category:"Appliances",quantity:78},{category:"Accessories",quantity:92},{category:"Office Supplies",quantity:63}],this.topSellingProducts=[{name:"Smartphone S22",quantity:45,revenue:2025e3},{name:"Laptop Pro X1",quantity:23,revenue:1955e3},{name:'LED TV 55"',quantity:18,revenue:117e4},{name:"Air Conditioner",quantity:15,revenue:525e3},{name:"Office Desk",quantity:12,revenue:144e3}],this.regularInstallments=18,this.substandardInstallments=5,this.doubtfulInstallments=4,this.badInstallments=1,this.supplierInstallmentCollection=28e4,this.supplierPrinciple=38e4,this.supplierProfit=7e4,this.employeeSearchQuery="",this.filteredInstallmentPersons=[],this.installmentModalVisible=!1,this.selectedInstallmentPerson=null}#t;#n;#e;#o;#a;ngOnInit(){this.initCharts(),this.updateChartOnColorModeChange(),this.filteredProducts=[...this.products],this.initSalesChart(),this.initCommissionChart(),this.totalItems=this.installmentPersons.length,this.calculateInstallmentStatusCounts(),this.updateInstallmentStatuses(),this.filteredInstallmentPersons=[...this.installmentPersons]}get paginatedInstallmentPersons(){let t=(this.currentPage-1)*this.itemsPerPage,n=t+this.itemsPerPage;return this.filteredInstallmentPersons.slice(t,n)}changePage(t){this.currentPage=t}previousPage(){this.currentPage>1&&this.currentPage--}nextPage(){this.currentPage<this.totalPages&&this.currentPage++}get totalPages(){return Math.ceil(this.totalItems/this.itemsPerPage)}get defaulters(){return this.installmentPersons.filter(t=>t.isDefaulter)}initCharts(){this.mainChart=this.#t.mainChart}initSalesChart(){let t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n=[42e3,38e3,45e3,5e4,49e3,6e4,7e4,91e3,8e4,75e3,6e4,85e3],o=[23,18,25,30,28,35,42,55,48,45,38,50];this.salesChart.data={labels:t,datasets:[{label:"Sales Value (\u09F3)",backgroundColor:"#4dbd74",data:n,yAxisID:"y"},{label:"Quantity Sold",backgroundColor:"#20a8d8",data:o,yAxisID:"y1"}]},this.salesChart.options={maintainAspectRatio:!1,scales:{y:{type:"linear",display:!0,position:"left",beginAtZero:!0,title:{display:!0,text:"Sales Value (\u09F3)"},ticks:{callback:function(c){return"\u09F3"+c.toLocaleString()}}},y1:{type:"linear",display:!0,position:"right",beginAtZero:!0,title:{display:!0,text:"Quantity Sold"},grid:{drawOnChartArea:!1}}}}}initCommissionChart(){let t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n=[5e3,4500,6e3,7500,8e3,9500,1e4,12e3,11e3,9e3,8500,10500];this.commissionChart.data={labels:t,datasets:[{label:"Monthly Commission",backgroundColor:"#20a8d8",data:n}]},this.commissionChart.options={maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,ticks:{callback:function(o){return"\u09F3"+o.toLocaleString()}}}}}}setTrafficPeriod(t){this.trafficRadioGroup.setValue({trafficRadio:t}),this.#t.initMainChart(t),this.initCharts()}handleChartRef(t){t&&this.mainChartRef.set(t)}updateChartOnColorModeChange(){let t=this.#e.listen(this.#n.documentElement,"ColorSchemeChange",()=>{this.setChartStyles()});this.#o.onDestroy(()=>{t()})}setChartStyles(){this.mainChartRef()&&setTimeout(()=>{let t=r({},this.mainChart.options),n=this.#t.getScales();this.mainChartRef().options.scales=r(r({},t.scales),n),this.mainChartRef().update()})}searchProducts(){if(!this.searchQuery.trim()){this.filteredProducts=[...this.products];return}let t=this.searchQuery.toLowerCase().trim();this.filteredProducts=this.products.filter(n=>n.name.toLowerCase().includes(t)||n.category.toLowerCase().includes(t)||n.supplier.toLowerCase().includes(t))}clearSearch(){this.searchQuery="",this.filteredProducts=[...this.products]}getTotalQuantity(t){return t.reduce((n,o)=>n+o.quantity,0)}getTotalProductSales(t){return t.reduce((n,o)=>n+o.sales,0)}switchRole(t){this.userRole=t}calculateInstallmentStatusCounts(){this.regularInstallments=0,this.substandardInstallments=0,this.doubtfulInstallments=0,this.badInstallments=0,this.installmentPersons.forEach(t=>{switch(t.status){case"Regular":this.regularInstallments++;break;case"Substandard":this.substandardInstallments++;break;case"Doubtful":this.doubtfulInstallments++;break;case"Bad":this.badInstallments++;break}})}classifyInstallmentStatus(t){return t<=0?"Regular":t<=30?"Substandard":t<=60?"Doubtful":"Bad"}updateInstallmentStatuses(){this.installmentPersons.forEach(t=>{t.status=this.classifyInstallmentStatus(t.daysSinceLastPayment),t.isDefaulter=t.status!=="Regular"}),this.calculateInstallmentStatusCounts()}searchInstallments(){if(!this.employeeSearchQuery.trim()){this.filteredInstallmentPersons=[...this.installmentPersons],this.totalItems=this.filteredInstallmentPersons.length,this.currentPage=1;return}let t=this.employeeSearchQuery.toLowerCase().trim();this.filteredInstallmentPersons=this.installmentPersons.filter(n=>n.name.toLowerCase().includes(t)||n.product.toLowerCase().includes(t)||n.status.toLowerCase().includes(t)||`VNB${n.id}`.includes(t)||n.totalAmount.toString().includes(t)||n.paidAmount.toString().includes(t)),this.totalItems=this.filteredInstallmentPersons.length,this.currentPage=1}clearInstallmentSearch(){this.employeeSearchQuery="",this.filteredInstallmentPersons=[...this.installmentPersons],this.totalItems=this.filteredInstallmentPersons.length,this.currentPage=1}openInstallmentModal(t){this.selectedInstallmentPerson=t,this.installmentModalVisible=!0}closeInstallmentModal(){this.installmentModalVisible=!1}handleModalChange(t){this.installmentModalVisible=t}getPreviousPaymentDate(t){let n=new Date(t);return n.setMonth(n.getMonth()-1),n}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=P({type:e,selectors:[["app-dashboard"]],decls:3,vars:1,consts:[[4,"ngIf"],[1,"mb-4"]],template:function(n,o){n&1&&(m(0,` Role Switcher (for demo purposes)
`),M(1,J,3,0,"div",0),x(2,"c-row")),n&2&&(f(),O("ngIf",o.userRole==="admin"))},dependencies:[S,D,k,q,A],styles:["[_nghost-%COMP%]   .legend[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:x-small}.card[_ngcontent-%COMP%]{border-radius:.5rem;box-shadow:0 4px 6px #0000001a;transition:transform .2s,box-shadow .2s}.card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 6px 12px #00000026}.card-header[_ngcontent-%COMP%]{font-weight:600;border-bottom:1px solid rgba(0,0,0,.05)}.bg-primary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%], .bg-info[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%], .bg-warning[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%], .bg-success[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%], .bg-danger[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding-top:1.5rem;padding-bottom:.5rem}.bg-primary[_ngcontent-%COMP%]   .fs-4[_ngcontent-%COMP%], .bg-info[_ngcontent-%COMP%]   .fs-4[_ngcontent-%COMP%], .bg-warning[_ngcontent-%COMP%]   .fs-4[_ngcontent-%COMP%], .bg-success[_ngcontent-%COMP%]   .fs-4[_ngcontent-%COMP%], .bg-danger[_ngcontent-%COMP%]   .fs-4[_ngcontent-%COMP%]{font-size:1.75rem!important;font-weight:700;margin-bottom:.25rem}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;background-color:#f8f9fa}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .2s}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#00000008}table.table-sm[_ngcontent-%COMP%]{font-size:.875rem}table.table-sm[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table.table-sm[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5rem}table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]{border-top:2px solid rgba(0,0,0,.1)}table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-weight:600}.badge[_ngcontent-%COMP%]{font-weight:500;padding:.35em .65em;border-radius:.25rem}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-top-left-radius:.375rem;border-bottom-left-radius:.375rem}.input-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem}.bg-light[_ngcontent-%COMP%]{border-radius:.5rem}.bg-light[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-bottom:.75rem;font-weight:600}.bg-light[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-weight:500}@media (max-width: 768px){.card[_ngcontent-%COMP%]{margin-bottom:1rem}.input-group[_ngcontent-%COMP%]{width:100%}h1[_ngcontent-%COMP%]{font-size:1.75rem}}.chart-container[_ngcontent-%COMP%]{position:relative;height:300px;width:100%}.progress[_ngcontent-%COMP%]{height:6px;margin-top:.5rem}.progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{border-radius:3px}.currency[_ngcontent-%COMP%]{font-family:monospace}.top-selling-product[_ngcontent-%COMP%]   .quantity-badge[_ngcontent-%COMP%]{background-color:#4dbd74;color:#fff;border-radius:1rem;padding:.25rem .75rem;font-weight:600;display:inline-block}.top-selling-product[_ngcontent-%COMP%]   .revenue[_ngcontent-%COMP%]{font-family:monospace;font-weight:600}.chart-with-sidebar[_ngcontent-%COMP%]{display:flex;gap:1.5rem}.chart-with-sidebar[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]{flex:1}.chart-with-sidebar[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{width:300px}@media (max-width: 992px){.chart-with-sidebar[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{width:100%;margin-top:1.5rem}}@media (max-width: 992px){.chart-with-sidebar[_ngcontent-%COMP%]{flex-direction:column}}.category-quantity[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.category-quantity[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.5rem 0;border-bottom:1px solid rgba(0,0,0,.05)}.category-quantity[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:none}.category-quantity[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]{font-weight:500}.category-quantity[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .quantity[_ngcontent-%COMP%]{font-weight:600;color:#4dbd74}.badge-regular[_ngcontent-%COMP%]{background-color:#4dbd74;color:#fff}.badge-substandard[_ngcontent-%COMP%]{background-color:#ffc107;color:#212529}.badge-doubtful[_ngcontent-%COMP%]{background-color:#f86c6b;color:#fff}.badge-bad[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:1rem}.pagination[_ngcontent-%COMP%]   .page-item[_ngcontent-%COMP%]{margin:0 .25rem}.pagination[_ngcontent-%COMP%]   .page-item[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{border-radius:.25rem;color:#2196f3}.pagination[_ngcontent-%COMP%]   .page-item[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]:hover{background-color:#e9ecef}.pagination[_ngcontent-%COMP%]   .page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#2196f3;border-color:#2196f3}.pagination[_ngcontent-%COMP%]   .page-item.disabled[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{color:#6c757d;pointer-events:none}.installment-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .installment-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.installment-table[_ngcontent-%COMP%]   .installment-progress[_ngcontent-%COMP%]{width:100%;height:6px;background-color:#e9ecef;border-radius:3px;overflow:hidden}.installment-table[_ngcontent-%COMP%]   .installment-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:100%;border-radius:3px}.installment-table[_ngcontent-%COMP%]   .installment-details[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.installment-table[_ngcontent-%COMP%]   .installment-details[_ngcontent-%COMP%]   .installment-count[_ngcontent-%COMP%]{font-weight:600}.installment-table[_ngcontent-%COMP%]   .installment-details[_ngcontent-%COMP%]   .installment-total[_ngcontent-%COMP%]{color:#6c757d;font-size:.875rem}.border-start-success[_ngcontent-%COMP%]{border-left-color:#4dbd74!important}.border-start-warning[_ngcontent-%COMP%]{border-left-color:#ffc107!important}.border-start-danger[_ngcontent-%COMP%]{border-left-color:#f86c6b!important}.border-start-dark[_ngcontent-%COMP%]{border-left-color:#343a40!important}.status-box[_ngcontent-%COMP%]{border-radius:.5rem;padding:1rem;transition:transform .2s}.status-box[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.status-box[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:.75rem}.status-box[_ngcontent-%COMP%]   .status-count[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700}.status-box[_ngcontent-%COMP%]   .status-label[_ngcontent-%COMP%]{font-size:.875rem;color:#6c757d}.search-input[_ngcontent-%COMP%]{min-width:300px}@media (max-width: 768px){.search-input[_ngcontent-%COMP%]{min-width:auto}}.search-result-info[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:.5rem 1rem;border-radius:.25rem;font-size:.875rem}.installment-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1}.installment-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;white-space:nowrap}.installment-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#20a8d80d}@media (max-width: 992px){c-card-header[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start!important}c-card-header[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{margin-top:.5rem;width:100%}}.customer-header[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.1);padding-bottom:1rem}.customer-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:.5rem}.customer-header[_ngcontent-%COMP%]   .customer-meta[_ngcontent-%COMP%]{display:flex;align-items:center}.installment-status-card[_ngcontent-%COMP%], .payment-info-card[_ngcontent-%COMP%]{background-color:#f8f9fa;border-radius:.5rem;padding:1.25rem;height:100%}.installment-count-item[_ngcontent-%COMP%]{background-color:#fff;border-radius:.25rem;box-shadow:0 1px 3px #0000001a}.payment-info-item[_ngcontent-%COMP%]{padding:.5rem 0;border-bottom:1px solid rgba(0,0,0,.05)}.payment-info-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.progress[_ngcontent-%COMP%]{height:10px;border-radius:5px}.progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{border-radius:5px}.installment-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{text-align:center}.installment-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child   button[_ngcontent-%COMP%]{transition:transform .2s}.installment-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child   button[_ngcontent-%COMP%]:hover{transform:scale(1.1)}"]})}}return e})();export{xt as DashboardComponent};
