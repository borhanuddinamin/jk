import{a as i,b as d,c as h}from"./chunk-5GI745L5.js";import{ca as u,ia as l}from"./chunk-KIEVHPHK.js";import{a as s,b as a}from"./chunk-7CGTOI24.js";var w=(()=>{class c{constructor(){this.http=l(h)}getDefaultHeaders(){return new i({"Content-Type":"application/json",Accept:"application/json, text/plain, */*"})}getDefaultAuthHeaders(){let t=localStorage.getItem("accessToken");if(!t){let r=localStorage.getItem("currentUser");if(r)try{let e=JSON.parse(r),n=e.token||e.accessToken||e.auth_token;if(n)return new i({Authorization:`Bearer ${n}`,"Content-Type":"application/json",Accept:"application/json, text/plain, */*"})}catch(e){console.warn("Failed to parse user JSON from localStorage",e)}console.warn("Auth token not found in localStorage")}return new i({Authorization:`Bearer ${t||""}`,"Content-Type":"application/json",Accept:"application/json, text/plain, */*"})}getWithFileHeaders(){let t=localStorage.getItem("accessToken");if(!t){let r=localStorage.getItem("currentUser");if(r)try{let e=JSON.parse(r),n=e.token||e.accessToken||e.auth_token;if(n)return new i({Authorization:`Bearer ${n}`,Accept:"application/json, text/plain, */*"})}catch(e){console.warn("Failed to parse user JSON from localStorage",e)}console.warn("Auth token not found in localStorage")}return new i({Authorization:`Bearer ${t||""}`,Accept:"application/json, text/plain, */*"})}jsonBodyToUrl(t){if(!t)return"";let r=new d;for(let n in t)if(t.hasOwnProperty(n)){let o=t[n];o==null?r=r.append(n,""):typeof o=="object"?r=r.append(n,JSON.stringify(o)):r=r.append(n,o.toString())}let e=r.toString();return e?`?${e}`:""}getBody(t){return t}getCacheHeaders(t){return t?t.set("x-request-cache","Y"):new i({"Content-Type":"application/json","x-request-cache":"Y"})}addUserInfoToBody(t,r){if(!r)return t;try{let e=localStorage.getItem("currentUser");if(e){let n=JSON.parse(e);if(t instanceof FormData){let o=t;return o.append("userId",n.user?.id||n.userId||""),o.append("userName",n.user?.userName||n.userName||""),o}else return a(s({},t),{userId:n.user?.id||n.userId,userName:n.user?.userName||n.userName})}}catch(e){console.error("Error adding user info to request:",e)}return t}httpPost(t,r,e=!1,n){let o=a(s({},n),{withCredentials:!0});return this.http.post(t,r)}httpGet(t,r){let e=a(s({},r),{withCredentials:!0});return this.http.get(t,e)}httpPut(t,r,e=!1,n){let o=this.addUserInfoToBody(r,e),p=a(s({},n),{withCredentials:!0});return this.http.put(t,o,p)}httpDelete(t,r){let e=a(s({},r),{withCredentials:!0});return this.http.delete(t,e)}httpPatch(t,r,e=!1,n){let o=this.addUserInfoToBody(r,e),p=a(s({},n),{withCredentials:!0});return this.http.patch(t,o,p)}static{this.\u0275fac=function(r){return new(r||c)}}static{this.\u0275prov=u({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})();export{w as a};
